stages:
  - source
  - test
  - build

check:
  stage: source
  only:
  - master
  - deploy
  image: hshnwinps/dev
  script:
  - pipenv install --dev
  - pipenv run python proctor.py -v full-check

test:
  stage: test
  only:
  - deploy
  image: hshnwinps/dev
  script:
  - pipenv install --dev
  - pipenv run tox -e py37

build:
  stage: build
  only:
  - deploy
  image: hshnwinps/dev
  script:
  - pipenv install --dev
  - pipenv run ./scripts/build_image.sh
